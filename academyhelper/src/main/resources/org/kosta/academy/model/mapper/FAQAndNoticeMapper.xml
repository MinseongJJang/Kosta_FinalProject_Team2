<?xml version="1.0" encoding="UTF-8"?>
<!-- Sql Mapper -->
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.kosta.academy.model.mapper.FAQAndNoticeMapper">
	<sql id="selectFAQ">
		select faq_no,faq_title,faq_content,faq_regdate,usr_id
		from faq
	</sql>
	<insert id="registerFAQ" parameterType="fAQVO">
	<!-- <selectKey keyProperty="faqNo" resultType="int" order="BEFORE">
		select
		faq_seq.nextval from dual
	</selectKey> -->
		insert into faq(faq_no,faq_title,faq_content,faq_regdate,usr_id)
		values(faq_seq.nextval,#{faqTitle},#{faqContent},sysdate,#{userVO.usrId})
	</insert>
	<resultMap type="fAQVO" id="fAQRM">
		<result property="userVO.usrId" column="usr_id"/>
	</resultMap>
	<select id="listFAQ" parameterType="pagingBean" resultMap="fAQRM">
		select f.faq_no,f.faq_title,f.faq_content,f.faq_regdate,u.usr_id
		from (select faq_no,row_number() over(order by faq_no desc) as rnum,
		faq_title,faq_content,faq_regdate,usr_id from faq) f, users u
		where f.usr_id=u.usr_id and rnum between #{startRowNumber} and #{endRowNumber}
		order by faq_no desc
	</select>
	<select id="detailFAQ" parameterType="String" resultType="fAQVO">
		<include refid="selectFAQ"/>
		where faq_no=#{value}
	</select>
	<update id="updateFAQ" parameterType="fAQVO">
		update faq set faq_title=#{faqTitle},faq_content=#{faqContent}
		where faq_no=#{faqNo}
	</update>
	<delete id="deleteFAQ" parameterType="string">
		delete from faq where faq_no=#{value} 
	</delete>
	<insert id="registerNotice" parameterType="noticeVO">
		insert into
	</insert>
	<select id="getTotalFaqCount" resultType="int">
		select count(*) from faq
	</select>
</mapper>